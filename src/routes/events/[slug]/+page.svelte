<script lang="ts">
  import TagChip from "$lib/components/TagChip.svelte";
  import CommentSection from "../../news/[slug]/CommentSection.svelte";
  import Event from "../Event.svelte";

  export let data;
  export let form;
  $: event = data.event;
</script>

<svelte:head>
  <title>{event.title} | D-sektionen</title>
</svelte:head>

<Event {event}>
  <div slot="actions">
    {#if data.canEdit}
      <a class="text-primary hover:underline" href={`/events/${event.slug}/edit`}> Redigera </a>
    {/if}
  </div>

  <div slot="tags" class="flex flex-row flex-wrap gap-2">
    {#each event.tags as tag}
      <TagChip {tag} />
    {/each}
  </div>

  <div slot="after" class="flex flex-col gap-2">
    <CommentSection
      type="EVENT"
      comments={event.comments}
      taggedMembers={data.allTaggedMembers}
      error={form?.error}
      commentContent={form?.data?.content ?? ""}
    />
  </div>
</Event>
